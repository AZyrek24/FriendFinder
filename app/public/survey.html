<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>FriendFinder Survey</title>
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ"
    crossorigin="anonymous">

</head>


<body>

  <div class="container">
    <div class="row">
      <h2>Survey Questions</h2>
      <hr>
      <h3>
        <b>About You</b>
      </h3>
      <h4>Name (Required)</h4>
      <div class="form-group">
        <input type="text" class="form-control" id="name">
      </div>
      <h4>Link to Photo Image (Required)</h4>
      <div class="form-group">
        <input type="text" class="form-control" id="photo">
      </div>
      <hr>
    </div>

    <div class="row">
      <h3>
        <b>Question 1</b>
      </h3>
      <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
      <div class="form-group">
        <select class="form-control" id="sel1">
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>
      <h3>
        <b>Question 2</b>
      </h3>
      <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
      <div class="form-group">
        <select class="form-control" id="sel2">
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>
      <h3>
        <b>Question 3</b>
      </h3>
      <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
      <div class="form-group">
        <select class="form-control" id="sel3">
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>
      <h3>
        <b>Question 4</b>
      </h3>
      <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
      <div class="form-group">
        <select class="form-control" id="sel4">
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>
      <h3>
        <b>Question 5</b>
      </h3>
      <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
      <div class="form-group">
        <select class="form-control" id="sel5">
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>
      <h3>
        <b>Question 6</b>
      </h3>
      <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
      <div class="form-group">
        <select class="form-control" id="sel6">
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>
      <h3>
        <b>Question 7</b>
      </h3>
      <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
      <div class="form-group">
        <select class="form-control" id="sel7">
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>
      <h3>
        <b>Question 8</b>
      </h3>
      <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
      <div class="form-group">
        <select class="form-control" id="sel8">
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>
      <h3>
        <b>Question 9</b>
      </h3>
      <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
      <div class="form-group">
        <select class="form-control" id="sel9">
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>
      <h3>
        <b>Question 10</b>
      </h3>
      <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
      <div class="form-group">
        <select class="form-control" id="sel10">
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>
      <hr>
      <button type="submit" class="btn btn-info btn-md" id="submit" style="width:100%">
        <h4>
          <i class="far fa-check-circle"></i> Submit</h4>
      </button>
      <hr>
    </div>
    <div>
      <footer>
        <div class="container">
          <p>
            <a href="/api/friends">API Friends List</a> |
            <a href="https://github.com/AZyrek24/FriendFinder">GitHub Repo</a>
          </p>
        </div>
      </footer>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery.js"></script>
  <script type="text/javascript">

    // In this code below we create the Front-end Javascript which "POSTS" our form data to our express server.
    // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
    // Our api recognizes the route (/api/tables)... and then runs the associated code (found in api-routes.js).
    // In this case the associated code "saves" the data to the table-data.js file or waitinglist-data.js file

    $(".submit").on("click", function () {

      // Here we grab the form elements
      var newFriendsData = {
        name: $('#name').val().trim(),
        photo: $('#photo').val().trim(),
        scores: [
          $('#sel1').val().trim(),
          $('#sel2').val().trim(),
          $('#sel3').val().trim(),
          $('#sel4').val().trim(),
          $('#sel5').val().trim(),
          $('#sel6').val().trim(),
          $('#sel7').val().trim(),
          $('#sel8').val().trim(),
          $('#sel9').val().trim(),
          $('#sel10').val().trim()
        ]
      };

      console.log(newFriendsData);

      // This line is the magic. It's very similar to the standard ajax function we used.
      // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
      // The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
      // depending on if a tables is available or not.

      // Here we get the location of the root page.
      // We use this instead of explicitly saying the URL is localhost:3001 because the url will change when we deploy.
      var currentURL = window.location.origin;

      $.post(currentURL + "/data/friends", newFriendsData,
        function (data) {

          // If a table is available... tell user they are booked.
          if (data == true) {
            alert("Yay! You are officially booked!")
          }

          // If a table is available... tell user they on the waiting list.
          if (data == false) {
            alert("Sorry you are on the wait list")
          }

          // Clear the form when submitting
          $('#reserve_name').val("");
          $('#reserve_phone').val("");
          $('#reserve_email').val("");
          $('#reserve_uniqueID').val("");

        });

      return false;

    });

  </script>





</body>

</html>